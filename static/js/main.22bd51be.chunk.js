(this.webpackJsonpadminpage=this.webpackJsonpadminpage||[]).push([[0],{53:function(e,t,a){e.exports=a(74)},58:function(e,t,a){},59:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(25),i=a.n(r),l=(a(58),a(11)),o=a(12),c=a(14),d=a(13),p=(a(59),a(60),a(15)),u=a(7),m=a(10),h=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).handleClose=function(){s.setState({modalActive:!1})},s.handleLoginButton=function(){s.props.handleLogin(s.state.username,s.state.password)},s.state={username:"",password:""},s}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(u.a,{show:!this.props.validLogin,onHide:this.handleClose},n.a.createElement(u.a.Header,{closeButton:!0},n.a.createElement(u.a.Title,null,n.a.createElement("h3",null,"Log In"))),n.a.createElement(u.a.Body,null,n.a.createElement(p.a,null,n.a.createElement(p.a.Group,null,n.a.createElement(p.a.Control,{onChange:function(t){return e.setState({username:t.target.value})},id:"SearchText",className:"SearchBar",type:"textarea",placeholder:"Username"}),n.a.createElement("br",null),n.a.createElement(p.a.Control,{onChange:function(t){return e.setState({password:t.target.value})},as:"input",type:"password",id:"SearchText",className:"SearchBar",placeholder:"Password"}))),null!=this.props.errorMSG?"ERROR: "+this.props.errorMSG:""),n.a.createElement(u.a.Footer,null,n.a.createElement(m.a,{variant:"success",onClick:this.handleLoginButton},"Log in"))))}}]),a}(s.Component),f=a(22),b=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).submitChanges=function(){s.updateTeachers(),s.props.exitEditing()},s.updateTeachers=function(){console.log(s.state.selectedTeachers);var e={};s.state.selectedTeachers.map((function(t){e[t]=s.props.teachers[t]})),s.props.db.ref("data/classes/".concat(s.props.className,"/teachers")).set(e);var t=s.props.teachers;Object.keys(s.props.teachers).map((function(e){s.state.selectedTeachers.includes(e)?t[e].class=s.props.className:t[e.class]==s.props.className&&(console.log("removing teacher from class"),t[e.class]=null)})),console.log(t),s.props.db.ref("data/teachers").set(t)},s.componentDidMount=function(){return s.setState({selectedTeachers:Object.keys(s.props.editedClass.teachers)})},s.toggleSelectedTeacher=function(e){var t=s.state.selectedTeachers;s.state.selectedTeachers.includes(e)?(t.splice(t.indexOf(e),1),s.setState({selectedTeachers:t})):t.push(e),console.log(s.state.selectedTeachers)},s.testIfChecked=function(e){return null===s.state.selectedTeachers?Object.keys(s.props.editedClass.teachers).includes(e):s.state.selectedTeachers.includes(e)},s.state={selectedTeachers:null},s}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.editedClass!==e.editedClass&&null!==this.props.editedClass&&this.setState({selectedTeachers:Object.keys(this.props.editedClass.teachers)})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(u.a,{show:null!=this.props.editedClass,onHide:this.props.exitEditing},n.a.createElement(u.a.Header,{closeButton:!0},n.a.createElement(u.a.Title,null,n.a.createElement("h3",null,"Edit ",this.props.className))),n.a.createElement(u.a.Body,null,n.a.createElement(p.a,null,n.a.createElement("h5",null,"Teachers:"),null!==this.props.teachers?Object.keys(this.props.teachers).map((function(t){var a=e.props.teachers[t];return n.a.createElement(p.a.Check,{custom:!0,type:"checkbox",id:"custom-checkbox-".concat(t),defaultChecked:e.testIfChecked(t),onClick:function(){return e.toggleSelectedTeacher(t)},label:a.firstName+" "+a.lastName})})):"")),n.a.createElement(u.a.Footer,null,n.a.createElement(m.a,{variant:"info",onClick:this.submitChanges},"Save changes"),n.a.createElement(m.a,{variant:"secondary",onClick:this.props.exitEditing},"Cancel"))))}}]),a}(s.Component),v=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).componentDidUpdate=function(e){if(s.props!=e&&(s.props.validLogin&&e.validLogin&&s.props.validLogin&&s.props.db.ref("data/classes").on("value",(function(e){e&&e.exists()&&(s.setState({classes:e.val()}),console.log(s.state.classes))})),null!=s.props.data&&null!=e.data&&s.props.data.classes==e.data.classes)){var t={};try{Object.keys(s.props.data.teachers).map((function(e){var a=s.props.data.teachers[e];Object.keys(t).includes(a.class)||(t[a.class]={teachers:{},students:{}}),t[a.class].teachers[a.id]=a}))}catch(a){console.log("no teachers")}try{Object.keys(s.props.data.students).map((function(e){var a=s.props.data.students[e];Object.keys(t).includes(a.class)||(t[a.class]={teachers:{},students:{}}),t[a.class].students[a.id]=a}))}catch(a){console.log("no students")}s.setState({classes:t}),s.props.db.ref("data/classes").set(t)}},s.exitEditing=function(){s.setState({editedClass:null})},s.state={classes:null,editedClass:null},s}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"classes"},n.a.createElement("h1",null,"Classes"),null!==this.state.classes?Object.keys(this.state.classes).map((function(t){return n.a.createElement(f.a,null,n.a.createElement(f.a.Body,null,n.a.createElement(f.a.Title,null,t," "),n.a.createElement(f.a.Subtitle,{className:"mb-2 text-muted"},"Taught by:",void 0!==e.state.classes[t].teachers?Object.values(e.state.classes[t].teachers).map((function(e){return" "+e.firstName+" "+e.lastName})):" no one"),n.a.createElement(f.a.Text,null,"Students: ",n.a.createElement("br",null),void 0!==e.state.classes[t].students?Object.values(e.state.classes[t].students).map((function(e){return" "+e.firstName+" "+e.lastName})):""),n.a.createElement(m.a,{disabled:!e.props.isAdmin,onClick:function(){console.log("changing"),e.setState({editedClass:e.state.classes[t],editClassName:t})}},"Edit class")))})):"",null!=this.state.editedClass?n.a.createElement(b,{className:this.state.editClassName,editedClass:this.state.editedClass,exitEditing:this.exitEditing,db:this.props.db,teachers:null!=this.props.data?this.props.data.teachers:null}):"")}}]),a}(s.Component),g=a(42),E=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(u.a,{show:this.props.currentlyEditing,onHide:this.props.closeModal},n.a.createElement(u.a.Header,{closeButton:!0},n.a.createElement(u.a.Title,null,n.a.createElement("h3",null,(this.props.creatingNew?"Create ":"Edit ")+this.props.editedObjectType))),n.a.createElement(u.a.Body,null,n.a.createElement(p.a,null,n.a.createElement(p.a.Group,null,Object.keys(this.props.editedObject).map((function(t){if("id"!=t)return n.a.createElement("div",null,n.a.createElement(p.a.Label,null,e.props.fieldFormatter[t]),n.a.createElement(p.a.Control,{onChange:function(a){e.props.editField(t,a.target.value)},type:"textarea",placeholder:e.props.fieldFormatter[t],value:e.props.editedObject[t]})," ",n.a.createElement("br",null))}))))),n.a.createElement(u.a.Footer,null,n.a.createElement(m.a,{variant:"info",onClick:function(){return e.props.submitChanges()}},this.props.creatingNew?"Create "+this.props.editedObjectType:"Save changes"),n.a.createElement(m.a,{variant:"secondary",onClick:this.props.closeModal},"Cancel"))))}}]),a}(s.Component),y={firstName:"First Name",lastName:"Last Name",name:"Name",class:"Class",grade:"Grade",GPA:"GPA"},C={firstName:"First Name",lastName:"Last Name",class:"Class"},N=function(e){var t={class:"",grade:"",GPA:""};return Object.keys(t).map((function(a){"name"!=a&&(t[a]=e[a])})),t},O=function(e){var t={class:""};return Object.keys(t).map((function(a){"name"!=a&&(t[a]=e[a])})),t},j={firstName:"",lastName:"",class:"",grade:"",GPA:"",id:""},S={firstName:"",lastName:"",class:"",id:""},k={admins:[{firstName:"Mister",lastName:"Admin",id:"CDZaxVJThgTf3mEMJMjuyP8IVeW2"}],teachers:[{firstName:"Mister",lastName:"Teacher",class:"Class 100",id:"tz9ehdvIDmRIF2IDHpv3XcMrznw2"},{firstName:"Miss",lastName:"Teacher",class:"Class 200",id:"mZoHc5O4DTdFTMBo1Ax31Bq8PRv2"}],students:[{firstName:"Some",lastName:"Guy",class:"Class 200",GPA:4,grade:1,id:123},{firstName:"Another",lastName:"Student",class:"Class 100",GPA:3,grade:2,id:456}]},T=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).removePerson=function(e){var t=s.props.personType.toLowerCase()+"s/";s.props.db.ref("data/"+t+e.id).remove()},s.addPerson=function(e){if("Student"==s.props.personType){var t=0;null==s.props.people?e.id=1:Object.keys(s.props.people).map((function(e){t<parseInt(e)&&(t=parseInt(e)+1)})),e.id=t,console.log(e),s.props.db.ref("data/students/"+e.id).set(e)}},s.insertEditedPerson=function(e){var t=s.props.personType.toLowerCase()+"s/";s.props.db.ref("data/"+t+e.id).set(e)},s.closeModal=function(){return s.setState({editingPerson:!1,editedPerson:{}})},s.editField=function(e,t){var a=s.state.editedPerson;a[e]=t,s.setState({editedPerson:a})},s.submitChanges=function(){s.state.creatingNewPerson?s.addPerson(s.state.editedPerson):s.insertEditedPerson(s.state.editedPerson),s.closeModal()},s.openEditMenu=function(e){var t="Student"==s.props.personType?j:S;Object.keys(e).map((function(a){t[a]=e[a]})),s.setState({editedPerson:t,creatingNewPerson:!1},(function(){return s.setState({editingPerson:!0})}))},s.openCreateMenu=function(){s.setState({editedPerson:"Student"==s.props.personType?j:S,editingPerson:!0,creatingNewPerson:!0})},s.state={classes:{},editingPerson:!1,editedPerson:{},creatingNewPerson:!1},s}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=0;return n.a.createElement("div",{className:"people"},n.a.createElement(g.a,null,null!=this.props.people&&null!=this.props.people&&Object.keys(this.props.people).map((function(a){var s=e.props.people[a];return n.a.createElement(f.a,null,n.a.createElement(f.a.Header,null,n.a.createElement(g.a.Toggle,{as:m.a,variant:"link",eventKey:t+""},s.firstName+" "+s.lastName)),n.a.createElement(g.a.Collapse,{eventKey:t+++""},n.a.createElement(f.a.Body,null,Object.keys(e.props.formatData(s)).map((function(t){return n.a.createElement("div",null,["id","firstName","lastName"].includes(t)?"":e.props.fieldFormatter[t]+": "+s[t]+"\n")})),n.a.createElement(m.a,{disabled:!e.props.isAdmin,onClick:function(){return e.openEditMenu(s)}},"Edit "+e.props.personType.toLowerCase()),n.a.createElement(m.a,{disabled:!e.props.isAdmin,onClick:function(){return e.removePerson(s)}},"Remove "+e.props.personType.toLowerCase()))))}))),n.a.createElement(E,{currentlyEditing:this.state.editingPerson,closeModal:this.closeModal,editField:this.editField,editedObject:this.state.editedPerson,submitChanges:this.submitChanges,creatingNew:this.state.creatingNewPerson,editedObjectType:this.props.personType,fieldFormatter:this.props.fieldFormatter,db:this.props.db}),n.a.createElement("div",{className:"createPerson"},n.a.createElement(m.a,{onClick:function(){return e.openCreateMenu()},disabled:!this.props.isAdmin},"Create new "+this.props.personType.toLowerCase())))}}]),a}(s.Component),P=a(46),w=a(52),A=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h1",null,"People"),n.a.createElement(w.a,{defaultActiveKey:"students"},n.a.createElement(P.a,{eventKey:"students",title:"Students",className:"tab"},n.a.createElement(T,{id:"studentDisplay",people:null!=this.props.data?this.props.data.students:null,removeObject:this.props.removeStudent,addObject:this.props.addStudent,editObject:this.props.editStudent,isAdmin:this.props.isAdmin,formatData:N,fieldFormatter:y,personType:"Student",db:this.props.db})),n.a.createElement(P.a,{eventKey:"teachers",title:"Teachers",className:"tab"},n.a.createElement(T,{id:"teacherDisplay",people:null!=this.props.data?this.props.data.teachers:null,removeObject:this.props.removeStudent,addObject:this.props.addStudent,editObject:this.props.editStudent,isAdmin:this.props.isAdmin,formatData:O,fieldFormatter:C,personType:"Teacher",db:this.props.db}))))}}]),a}(s.Component),L=a(41),M=a.n(L);a(68),a(70);console.log("AIzaSyBQSqeaiDALhBo0qi_Qp5whu4JvcFH7XWs");M.a.initializeApp({apiKey:"AIzaSyBQSqeaiDALhBo0qi_Qp5whu4JvcFH7XWs",authDomain:"adminpage-b6e0e.firebaseapp.com",databaseURL:"https://adminpage-b6e0e.firebaseio.com",projectId:"adminpage-b6e0e",storageBucket:"adminpage-b6e0e.appspot.com",messagingSenderId:"777201403331",appId:"1:777201403331:web:9de614ccba431384b0e976",measurementId:"G-WBLEN57M12"});M.a.auth();var B=M.a,x=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).resetData=function(){B.database().ref("data").remove(),s.setState({data:k},(function(){Object.keys(s.state.data).map((function(e){s.state.data[e].map((function(t){B.database().ref("data/"+e+"/"+t.id).set(t)}))}))}))},s.checkUserIsAdmin=function(e){var t=!1;try{if(Object.keys(s.state.data.admins).map((function(a){var n=s.state.data.admins[a];n.id.toString()===e.toString()&&(console.log("admin logged in"),t=!0,s.setState({isAdmin:!0,usersName:n.firstName+" "+n.lastName}))})),!t){var a=s.state.data.teachers[e];s.setState({usersName:a.firstName+" "+a.lastName})}}catch(n){console.log("no admins")}},s.loadData=function(){B.database().ref("data").on("value",(function(e){e&&e.exists()&&s.setState({data:e.val()},(function(){var e=B.auth().currentUser.uid;s.checkUserIsAdmin(e)}))}))},s.handleLogin=function(e,t){B.auth().signInWithEmailAndPassword(e,t).then((function(){s.setState({validLogin:!0}),s.loadData()})).catch((function(e){console.log(e.message),s.setState({errorMSG:e.message.toString()})}))},s.state={data:null,validLogin:!1,errorMSG:null,isAdmin:!1},s}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},this.state.validLogin?n.a.createElement("div",null," ",n.a.createElement("div",{className:"welcomeMessage"},"Welcome, ",this.state.usersName),n.a.createElement("div",{className:"info"},n.a.createElement(A,{data:this.state.data,isAdmin:this.state.isAdmin,db:B.database()}),n.a.createElement(v,{data:this.state.data,validLogin:this.state.validLogin,isAdmin:this.state.isAdmin,db:B.database()}))):n.a.createElement(h,{handleLogin:this.handleLogin,errorMSG:this.state.errorMSG,validLogin:this.state.validLogin}))}}]),a}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.22bd51be.chunk.js.map