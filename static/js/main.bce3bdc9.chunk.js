(this.webpackJsonpadminpage=this.webpackJsonpadminpage||[]).push([[0],{40:function(e,t,a){e.exports=a(60)},45:function(e,t,a){},46:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(21),i=a.n(r),l=(a(45),a(10)),c=a(11),o=a(13),d=a(12),u=(a(46),a(47),a(14)),m=a(7),p=a(8),h=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClose=function(){n.setState({modalActive:!1})},n.handleLoginButton=function(){n.props.handleLogin(n.state.username,n.state.password)},n.state={username:"admin@admin.com",password:"password"},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.handleLogin(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(m.a,{show:!this.props.validLogin,onHide:this.handleClose},s.a.createElement(m.a.Header,{closeButton:!0},s.a.createElement(m.a.Title,null,s.a.createElement("h3",null,"Log In"))),s.a.createElement(m.a.Body,null,s.a.createElement(u.a,null,s.a.createElement(u.a.Group,null,s.a.createElement(u.a.Control,{onChange:function(t){return e.setState({username:t.target.value})},id:"SearchText",className:"SearchBar",type:"textarea",placeholder:"Username"}),s.a.createElement("br",null),s.a.createElement(u.a.Control,{onChange:function(t){return e.setState({password:t.target.value})},id:"SearchText",className:"SearchBar",type:"textarea",placeholder:"Password"}))),null!=this.props.errorMSG?"ERROR: "+this.props.errorMSG:""),s.a.createElement(m.a.Footer,null,s.a.createElement(p.a,{variant:"success",onClick:this.handleLoginButton},"Log in"))))}}]),a}(n.Component),f=a(19),v=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).closeModal=function(){return n.setState({modalActive:!1})},n.state={modalActive:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(p.a,{onClick:function(){return e.setState({modalActive:!0})}},"Edit class"),s.a.createElement(m.a,{show:this.state.modalActive,onHide:this.closeModal},s.a.createElement(m.a.Header,{closeButton:!0},s.a.createElement(m.a.Title,null,s.a.createElement("h3",null,"Edit class"))),s.a.createElement(m.a.Body,null),s.a.createElement(m.a.Footer,null,s.a.createElement(p.a,{variant:"info",onClick:this.closeModal},"Save changes"),s.a.createElement(p.a,{variant:"secondary",onClick:this.closeModal},"Cancel"))))}}]),a}(n.Component),E=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidUpdate=function(e){if(null!=n.props.data&&n.props.data!=e.data){var t={};Object.keys(n.props.data.teachers).map((function(e){var a=n.props.data.teachers[e];Object.keys(t).includes(a.class)?t[a.class].teachers.push(a):t[a.class]={teachers:[a],students:[]}}));try{Object.keys(n.props.data.students).map((function(e){var a=n.props.data.students[e];Object.keys(t).includes(a.class)?t[a.class].students.push(a):t[a.class]={teachers:[],students:[a]}}))}catch(a){console.log("no students")}n.setState({classes:t}),n.props.classesRef.set(t)}},n.state={classes:{}},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"classes"},s.a.createElement("h1",null,"Classes"),Object.keys(this.state.classes).map((function(t){return s.a.createElement(f.a,null,s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Title,null,t," "),s.a.createElement(f.a.Subtitle,{className:"mb-2 text-muted"},"Taught by:"," "+e.state.classes[t].teachers.map((function(e){return e.name+", "}))),s.a.createElement(f.a.Text,null,"Students: ",s.a.createElement("br",null),e.state.classes[t].students.map((function(e){return e.firstName+" "+e.lastName+", "}))),s.a.createElement(v,{classID:t,classesRef:e.props.classesRef})))})))}}]),a}(n.Component),S=a(30),g={firstName:"First Name",lastName:"Last Name",name:"Name",class:"Class",grade:"Grade",GPA:"GPA"};var b={admins:[{name:"Mister Admin",id:"CDZaxVJThgTf3mEMJMjuyP8IVeW2"}],teachers:[{name:"Mister Teacher",class:"Class 100",id:"tz9ehdvIDmRIF2IDHpv3XcMrznw2"},{name:"Miss Teacher",class:"Class 200",id:"mZoHc5O4DTdFTMBo1Ax31Bq8PRv2"}],students:[{firstName:"Some",lastName:"Guy",class:"Class 200",GPA:4,grade:1,id:123},{firstName:"Another",lastName:"Student",class:"Class 100",GPA:3,grade:2,id:456}]},C=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={modalActive:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(m.a,{show:this.props.editingStudent,onHide:this.props.closeModal},s.a.createElement(m.a.Header,{closeButton:!0},s.a.createElement(m.a.Title,null,s.a.createElement("h3",null,this.props.creatingNewStudent?"Create new student":"Edit student information"))),s.a.createElement(m.a.Body,null,s.a.createElement(u.a,null,s.a.createElement(u.a.Group,null,Object.keys(this.props.editedStudent).map((function(t){if("id"!=t)return s.a.createElement("div",null,s.a.createElement(u.a.Label,null,g[t]),s.a.createElement(u.a.Control,{onChange:function(a){console.log(a.target.value),e.props.editStudent(t,a.target.value)},type:"textarea",placeholder:g[t],value:e.props.editedStudent[t]})," ",s.a.createElement("br",null))}))))),s.a.createElement(m.a.Footer,null,s.a.createElement(p.a,{variant:this.props.creatingNewStudent?"info":"success",onClick:function(){return e.props.submitChanges()}},this.props.creatingNewStudent?"Create student":"Edit student"),s.a.createElement(p.a,{variant:"secondary",onClick:this.props.closeModal},"Cancel"))))}}]),a}(n.Component),y=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).closeModal=function(){n.setState({editingStudent:!1})},n.editStudent=function(e,t){var a=n.state.editedStudent;a[e]=t,n.setState({student:a})},n.submitChanges=function(){n.props.addStudent(n.state.editedStudent)},n.openEditMenu=function(e){var t=n.state.editedStudent;Object.keys(e).map((function(a){t[a]=e[a]})),n.setState({editedStudent:t,creatingNewStudent:!1},(function(){return n.setState({editingStudent:!0})}))},n.state={classes:{},editingStudent:!1,editedStudent:{firstName:"",lastName:"",class:"",grade:"",GPA:""},creatingNewStudent:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=0;return s.a.createElement("div",{className:"students"},s.a.createElement("h1",null,"Students"),s.a.createElement(S.a,null,null!=this.props.data&&null!=this.props.data.students&&Object.keys(this.props.data.students).map((function(a){var n=e.props.data.students[a];return s.a.createElement(f.a,null,s.a.createElement(f.a.Header,null,s.a.createElement(S.a.Toggle,{as:p.a,variant:"link",eventKey:t+""},n.firstName+" "+n.lastName)),s.a.createElement(S.a.Collapse,{eventKey:t+++""},s.a.createElement(f.a.Body,null,Object.keys(function(e){var t={class:"",grade:"",GPA:""};return Object.keys(t).map((function(a){"name"!=a&&(t[a]=e[a])})),t}(n)).map((function(e){return s.a.createElement("div",null,["id","firstName","lastName"].includes(e)?"":g[e]+": "+n[e]+"\n")})),s.a.createElement(p.a,{disabled:!e.props.isAdmin,onClick:function(){return e.openEditMenu(n)}},"Edit student"),s.a.createElement(p.a,{disabled:!e.props.isAdmin,onClick:function(){return e.props.removeStudent(n)}},"Remove student"))))}))),s.a.createElement(p.a,{className:"createStudent",onClick:function(){return e.setState({editingStudent:!0,creatingNewStudent:!0})},disabled:!this.props.isAdmin},"Create new student"),s.a.createElement(C,{editingStudent:this.state.editingStudent,closeModal:this.closeModal,editStudent:this.editStudent,editedStudent:this.state.editedStudent,submitChanges:this.submitChanges,creatingNewStudent:this.state.creatingNewStudent}))}}]),a}(n.Component),j=a(29),O=a.n(j);a(54),a(56);O.a.initializeApp({apiKey:"AIzaSyBQSqeaiDALhBo0qi_Qp5whu4JvcFH7XWs",authDomain:"adminpage-b6e0e.firebaseapp.com",databaseURL:"https://adminpage-b6e0e.firebaseio.com",projectId:"adminpage-b6e0e",storageBucket:"adminpage-b6e0e.appspot.com",messagingSenderId:"777201403331",appId:"1:777201403331:web:9de614ccba431384b0e976",measurementId:"G-WBLEN57M12"});O.a.auth();var k=O.a,N=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).resetData=function(){n.setState({data:b},(function(){n.setData()}))},n.setData=function(){Object.keys(n.state.data).map((function(e){n.state.data[e].map((function(t){k.database().ref("data/"+e+"/"+t.id).set(t)}))}))},n.checkUserIsAdmin=function(e){var t=!1;Object.keys(n.state.data.admins).map((function(a){var s=n.state.data.admins[a];s.id.toString()===e.toString()&&(console.log("admin logged in found"),t=!0,n.setState({isAdmin:!0,usersName:s.name}))})),t||n.setState({usersName:n.state.data.teachers[e].name})},n.loadData=function(){k.database().ref("data").once("value",(function(e){e&&e.exists()&&n.setState({data:e.val()},(function(){var e=k.auth().currentUser.uid;console.log(e),n.checkUserIsAdmin(e)}))}))},n.handleLogin=function(e,t){k.auth().signInWithEmailAndPassword(e,t).then((function(){n.setState({validLogin:!0}),n.loadData()})).catch((function(e){console.log(e.message),n.setState({errorMSG:e.message.toString()})}))},n.removeStudent=function(e){k.database().ref("data/students/"+e.id).remove(),n.loadData()},n.addStudent=function(e){var t=0;Object.keys(n.state.data.students).map((function(e){t<parseInt(e)&&(t=parseInt(e)+1)})),e.id=t,k.database().ref("data/students/"+e.id).set(e),n.loadData()},n.state={data:null,validLogin:!1,errorMSG:null,isAdmin:!1},n}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},"Welcome, ",this.state.usersName,s.a.createElement("div",{className:"info"},s.a.createElement(h,{handleLogin:this.handleLogin,errorMSG:this.state.errorMSG,validLogin:this.state.validLogin}),s.a.createElement(y,{data:this.state.data,removeStudent:this.removeStudent,addStudent:this.addStudent,editStudent:this.editStudent,isAdmin:this.state.isAdmin}),s.a.createElement(E,{data:this.state.data,classesRef:k.database().ref("data/classes")})),s.a.createElement(p.a,{onClick:this.resetData},"RESET DATABASE (delete later)"))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.bce3bdc9.chunk.js.map